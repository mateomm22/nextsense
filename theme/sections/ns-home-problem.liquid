<div class="home-problem-solution js-home-problem-solution" style="--text: var(--white)">
  <div class="section section--1">
    <div class="container">
      <h2 class="title title--xl">
        {{ section.settings.headline_1 }}
      </h2>

      <div class="text text--lg">
        {{ section.settings.description_1 }}
      </div>
    </div>
  </div>

  <div class="section section--2">
    <div class="container">
      <h2 class="title title--xl">
        <img src="{{ 'earbud-l.webp' | asset_url }}" class="earbud earbud--l" alt="">
        {{ section.settings.headline_2 }}
        <img src="{{ 'earbud-r.webp' | asset_url }}" class="earbud earbud--r" alt="">
      </h2>

      <div class="text text--xl">
        {{ section.settings.description_2 }}
      </div>

      <div class="text">
        {{ section.settings.description_2_1 }}
      </div>

      <a href="" class="btn btn--clear">
        <span class="btn__text">
          Order Now
        </span>
      </a>
    </div>
  </div>

  {% if section.blocks.size > 0 %}
  <div class="section section--carousel js-carousel-app">
    <div class="container">
      <!-- Slider main container -->
      <div class="swiper carousel js-home-swiper">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
          <div class="swiper-slide">
            <div class="card" :class="{'card--opened': activeCard === {{ forloop.index }}}">
              {% if block.settings.bg_image %}
                <picture class="card__bg">
                  <!-- WebP source for modern browsers -->
                  <source
                    srcset="
                      {{ block.settings.bg_image | image_url: width: 480, format: 'webp' }} 480w,
                      {{ block.settings.bg_image | image_url: width: 768, format: 'webp' }} 768w,
                    "
                    sizes="100vw"
                    type="image/webp"
                  >

                  <!-- Fallback <img> tag -->
                  <img
                    src="{{ block.settings.bg_image | image_url: width: 768 }}"
                    alt="{{ block.settings.bg_image.alt | escape }}"
                    decoding="async"
                  >
                </picture>
              {% endif %}
              <div class="card__index">
                <span class="title">
                  {{ forloop.index }}
                </span>
              </div>

              <div class="card__content">
                <h3 class="title title--sm">
                  {{ block.settings.headline }}
                </h3>

                {% if block.settings.description %}
                <div class="text">
                  {{ block.settings.description }}
                </div>
                {% endif %}
              </div>

              <div class="card__action" @click="toggleCard({{ forloop.index }})">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M8.25009 17.5V9.75H0.500092L0.500092 8.25H8.25009V0.5L9.75009 0.5V8.25H17.5001V9.75L9.75009 9.75L9.75009 17.5H8.25009Z" />
                </svg>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

        <!-- If we need navigation buttons -->
        <div class="swiper-button swiper-button-prev">
          <svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.523 6.4997L6.25775 10.2342C6.35508 10.3317 6.406 10.4465 6.4105 10.5785C6.415 10.7106 6.36408 10.8318 6.25775 10.942C6.14742 11.0523 6.0285 11.1084 5.901 11.1102C5.77333 11.1122 5.65442 11.058 5.54425 10.9477L1.1615 6.5652C1 6.40353 0.91925 6.21503 0.91925 5.9997C0.91925 5.78437 1 5.59587 1.1615 5.4342L5.54425 1.0517C5.64175 0.954202 5.75742 0.903202 5.89125 0.898702C6.02525 0.894202 6.14742 0.947118 6.25775 1.05745C6.36408 1.16762 6.41825 1.28554 6.42025 1.4112C6.42208 1.53687 6.36792 1.65487 6.25775 1.7652L2.523 5.4997H14.9038C15.0461 5.4997 15.165 5.54745 15.2605 5.64295C15.356 5.73845 15.4038 5.85737 15.4038 5.9997C15.4038 6.14204 15.356 6.26095 15.2605 6.35645C15.165 6.45195 15.0461 6.4997 14.9038 6.4997H2.523Z" fill="white"/>
          </svg>
        </div>

        <div class="swiper-button swiper-button-next">
          <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.073 6.5002H0.5C0.357667 6.5002 0.23875 6.45245 0.14325 6.35695C0.0477499 6.26145 0 6.14254 0 6.0002C0 5.85787 0.0477499 5.73895 0.14325 5.64345C0.23875 5.54795 0.357667 5.5002 0.5 5.5002H12.073L8.3385 1.7657C8.241 1.6682 8.19 1.55345 8.1855 1.42145C8.181 1.28928 8.232 1.16812 8.3385 1.05795C8.44867 0.947618 8.56758 0.891535 8.69525 0.889702C8.82275 0.887702 8.94167 0.941869 9.052 1.0522L13.4345 5.4347C13.5218 5.52203 13.5831 5.6112 13.6182 5.7022C13.6536 5.7932 13.6712 5.89254 13.6712 6.0002C13.6712 6.10787 13.6536 6.2072 13.6182 6.2982C13.5831 6.3892 13.5218 6.47837 13.4345 6.5657L9.052 10.9482C8.9545 11.0457 8.83875 11.0967 8.70475 11.1012C8.57075 11.1057 8.44867 11.0528 8.3385 10.9425C8.232 10.8323 8.17783 10.7144 8.176 10.5887C8.174 10.463 8.22817 10.345 8.3385 10.2347L12.073 6.5002Z" fill="white"/>
          </svg>

        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Problem-Solution",
  "tag": "section",
  "disabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Section 1"
    },
    {
      "type": "text",
      "id": "headline_1",
      "label": "Headline"
    },
    {
      "type": "richtext",
      "id": "description_1",
      "label": "Description"
    },
    {
      "type": "header",
      "content": "Section 2"
    },
    {
      "type": "text",
      "id": "headline_2",
      "label": "Headline"
    },
    {
      "type": "richtext",
      "id": "description_2",
      "label": "Description big"
    },
    {
      "type": "richtext",
      "id": "description_2_1",
      "label": "Description"
    },
    {
      "type": "url",
      "id": "link",
      "label": "t:settings.link"
    },
    {
      "type": "checkbox",
      "id": "open_in_new_tab",
      "label": "t:settings.open_new_tab",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "bg_image",
          "label": "Background Image"
        },
        {
          "type": "text",
          "id": "headline",
          "label": "Headline"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
      ]
    }
  ],
  "presets": [
    {
      "name": "Problem-Solution",
      "category": "Banners",
    }
  ]
}
{% endschema %}
